PERBAIKAN KRITIS: Profit Calculation untuk Digit Contracts Tidak Sesuai

MASALAH YANG DITEMUKAN:
Dari logs terlihat:
- Trade #25: Stake $12.00 → Profit hanya $1.16 (seharusnya ~$10-11)
- Trade #26: Stake $12.00 → Profit hanya $1.16 (seharusnya ~$10-11)
- Trade #27: Stake $12.00 → (masih berjalan)

Contract type: DIGITDIFF
Symbol: R_100
Confidence: 77%+
Win Rate: 88% (bagus, tidak perlu ubah strategi)

STRATEGI SUDAH BENAR - JANGAN DIUBAH!
Strategi LDP menghasilkan trade yang menang, hanya masalah tampilan profit saja.

AKAR MASALAH:
1. Deriv API mengembalikan 'profit' yang sudah dikurangi stake
2. Untuk digit contracts, payout calculation berbeda dari contract biasa
3. File yang bermasalah: deriv_ws.py dan trading.py

LOKASI PERBAIKAN:

File: deriv_ws.py
Method: buy_contract() dan _handle_contract_update()
Masalah: Tidak mencatat 'payout' dari proposal dan buy response
Solusi: Simpan 'payout' dari proposal untuk digit contracts

File: trading.py  
Method: _on_contract_update()
Baris: 1024-1027 (saat menghitung profit)
Masalah: Menggunakan contract.get("profit") langsung tanpa validasi
Solusi: Hitung ulang profit dari sell_price atau payout

DETAIL PERBAIKAN YANG DIBUTUHKAN:

1. Di deriv_ws.py baris ~635-640 (dalam buy_contract):
   - Saat menerima proposal response, simpan proposal.get("payout")
   - Pass payout ke dalam return value
   - Log: "Proposal payout: $XX.XX untuk verification"

2. Di deriv_ws.py baris ~650-660 (dalam _handle_buy):
   - Simpan buy.get("payout") ke active_contracts
   - Tambah field "expected_payout" untuk tracking

3. Di trading.py baris ~1024-1027 (_on_contract_update):
   SEBELUM:
profit = contract.get("profit", 0)

SESUDAH:
Untuk digit contracts, hitung profit dari payout atau sell_price
buy_price = self.active_trade.get("buy_price", 0)
sell_price = contract.get("sell_price", 0)

if sell_price > 0:
profit = sell_price - buy_price
else:
profit = contract.get("profit", 0)

logger.info(f"Profit calculation: buy_price=${buy_price}, sell_price=${sell_price}, profit=${profit}")
4. Tambahkan logging detail di trading.py baris ~1022:
logger.info(f"Contract update detail: buy_price={buy_price}, sell_price={sell_price}, "
f"profit_field={contract.get('profit')}, payout={contract.get('payout')}, "
f"is_sold={contract.get('is_sold')}")

VERIFIKASI SETELAH PERBAIKAN:
- Stake $12.00 seharusnya menghasilkan profit ~$10-11 untuk DIGITDIFF win
- Total payout = stake + profit (sekitar $22-23)
- Check logs untuk memastikan sell_price tercatat dengan benar

CATATAN PENTING:
- JANGAN ubah LDP strategy - sudah menghasilkan win rate 88%
- JANGAN ubah entry_filter - confidence 77% sudah bagus
- JANGAN ubah stake calculation - $12 sudah sesuai
- HANYA perbaiki profit calculation di deriv_ws.py dan trading.py

TESTING:
Setelah fix, monitor 3 trade berikutnya:
1. Pastikan profit calculation benar
2. Verify sell_price di logs
3. Compare dengan Deriv web platform untuk konfirmasi

EXPECTED HASIL:
✅ Stake: $12.00
✅ Profit: ~$10-11 (bukan $1.16)
✅ Win Rate: tetap 88%
✅ Strategy: tetap LDP DIGITDIFF